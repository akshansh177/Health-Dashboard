<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Health Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <header class="bg-primary text-white shadow-sm">
        <nav class="navbar navbar-dark container-fluid">
            <a class="navbar-brand d-flex align-items-center" href="#">
                <i class="fas fa-heartbeat fa-lg mr-2"></i>
                <span class="h5 mb-0">Health Dashboard</span>
            </a>
            <ul class="navbar-nav flex-row">
                <li class="nav-item"><a class="nav-link px-3 active" id="nav-dashboard" href="#">Dashboard</a></li>
                <li class="nav-item"><a class="nav-link px-3" id="nav-records" href="#">Patient Records</a></li>
                <li class="nav-item"><a class="nav-link px-3" id="nav-demographics" href="#">Demographics</a></li>
                <li class="nav-item"><a class="nav-link px-3" id="nav-lab" href="#">Lab</a></li>
                <li class="nav-item"><a class="nav-link px-3" id="nav-logbook" href="#">Logbook</a></li>
                <li class="nav-item"><a class="nav-link px-3" id="nav-reports" href="#">Reports</a></li>
            </ul>
        </nav>
    </header>

    <main class="container-fluid my-4">

        <div id="page-dashboard">
            <div class="row">
                <div class="col-lg-3 mb-4">
                    <div class="card h-100"><div class="card-body">
                        <h5 class="card-title"><i class="fas fa-user-plus mr-2 text-primary"></i>Add New Patient</h5>
                        <hr>
                        <form id="add-patient-form">
                            <div class="form-group"><label>Date of Visit</label><input type="date" class="form-control form-control-sm" id="registration_date" required></div>
                            <div class="form-group"><label>Name</label><input type="text" class="form-control form-control-sm" id="name" required></div>
                            <div class="form-group"><label>Husband/Father's Name</label><input type="text" class="form-control form-control-sm" id="husband_father_name"></div>
                            <div class="form-row">
                                <div class="form-group col-md-6"><label>Age</label><input type="number" class="form-control form-control-sm" id="age"></div>
                                <div class="form-group col-md-6"><label>Sex</label><select id="sex" class="form-control form-control-sm"><option>Male</option><option>Female</option></select></div>
                            </div>
                            <div class="form-group"><label>Caste</label><select id="caste" class="form-control form-control-sm"><option value="General">General</option><option value="SC/ST">SC/ST</option><option value="Others">Others</option></select></div>
                            <div class="form-group"><label>Village</label><input type="text" class="form-control form-control-sm" id="village_name" required></div>
                            <div class="form-group"><label>Program</label><select id="program_type" class="form-control form-control-sm"><option value="General">General</option><option value="HTN">HTN</option><option value="DM">DM</option><option value="ANC">ANC</option><option value="PNC">PNC</option><option value="CATARACT">Cataract</option></select></div>
                            <button type="submit" class="btn btn-primary btn-block mt-3"><i class="fas fa-plus-circle mr-2"></i>Add Patient</button>
                        </form>
                    </div></div>
                </div>
                <div class="col-lg-9">
                    <div class="card h-100"><div class="card-body">
                        <h5 class="card-title"><i class="fas fa-chart-bar mr-2 text-primary"></i>Generate Follow-up Report</h5>
                        <hr>
                        <div class="row bg-light p-3 mb-3 rounded">
                            <div class="col-md-3"><div class="form-group"><label>Start Date</label><input type="date" id="filter-start-date" class="form-control form-control-sm"></div><div class="form-group mb-md-0"><label>End Date</label><input type="date" id="filter-end-date" class="form-control form-control-sm"></div></div>
                            <div class="col-md-3"><label>Villages</label><div id="filter-village-checkboxes" class="checkbox-container"></div></div>
                            <div class="col-md-3"><label>Programs</label><div id="filter-program-checkboxes" class="checkbox-container"></div></div>
                            <div class="col-md-2"><label>Caste</label><div id="filter-caste-checkboxes" class="checkbox-container"></div></div>
                            <div class="col-md-1 d-flex align-items-end"><button id="generate-report-btn" class="btn btn-primary btn-block btn-sm mt-3">Filter</button></div>
                        </div>
                        <div id="report-results">
                            <div class="d-flex justify-content-between align-items-center"><h6 class="mb-0">Follow-up Records <span id="report-count" class="badge badge-pill badge-primary ml-2">0</span></h6><button id="export-excel-btn" class="btn btn-success btn-sm" disabled><i class="fas fa-file-excel mr-1"></i>Export</button></div><hr class="mt-2">
                            <div id="report-table-container" class="table-responsive"><p class="text-muted text-center">Select filters and click "Filter".</p></div>
                        </div>
                    </div></div>
                </div>
            </div>

            <div class="row mt-4"><div class="col-12"><div class="card"><div class="card-body">
                <h5 class="card-title"><i class="fas fa-notes-medical mr-2 text-primary"></i>Add Monthly Follow-up</h5><hr>
                <form id="add-follow-up-form">
                    <div class="form-row">
                        <div class="form-group col-md-4"><label>Select Patient</label><select id="fu-patient-id" class="form-control form-control-sm" required><option value="">-- Please Select --</option></select></div>
                        <div class="form-group col-md-2"><label>Follow-up Date</label><input type="date" id="fu-date" class="form-control form-control-sm" required></div>
                    </div>
                    <h6 class="mt-3">Vitals</h6><hr class="mt-1 mb-2">
                    <div class="form-row">
                        <div class="form-group col-md-2"><label>Pulse</label><input type="text" id="fu-pulse" class="form-control form-control-sm"></div>
                        <div class="form-group col-md-2"><label>Resp. Rate</label><input type="text" id="fu-respiratory-rate" class="form-control form-control-sm"></div>
                        <div class="form-group col-md-2"><label>Temperature</label><input type="text" id="fu-temperature" class="form-control form-control-sm"></div>
                        <div class="form-group col-md-2"><label>Blood Pressure</label><input type="text" id="fu-blood-pressure" class="form-control form-control-sm"></div>
                        <div class="form-group col-md-2"><label>Weight (Kg)</label><input type="number" step="0.1" id="fu-weight" class="form-control form-control-sm"></div>
                        <div class="form-group col-md-2"><label>Height (cm)</label><input type="number" step="0.1" id="fu-height" class="form-control form-control-sm"></div>
                    </div>
                    <h6 class="mt-3">History & Notes</h6><hr class="mt-1 mb-2">
                    <div class="form-row">
                        <div class="form-group col-md-3"><label>Known Case Of (K/C/O)</label><textarea id="fu-kco" class="form-control form-control-sm" rows="2"></textarea></div>
                        <div class="form-group col-md-3"><label>History Of (H/O)</label><textarea id="fu-ho" class="form-control form-control-sm" rows="2"></textarea></div>
                        <div class="form-group col-md-3"><label>Complaint Of (C/O)</label><textarea id="fu-co" class="form-control form-control-sm" rows="2"></textarea></div>
                        <div class="form-group col-md-3"><label>On Examination (O/E)</label><textarea id="fu-oe" class="form-control form-control-sm" rows="2"></textarea></div>
                    </div>
                    <div class="form-row">
                        <div class="form-group col-md-4"><label>Treatment Advised</label><textarea id="fu-treatment" class="form-control form-control-sm" rows="2"></textarea></div>
                        <div class="form-group col-md-4"><label>Medicine Prescribed</label><textarea id="fu-medicine" class="form-control form-control-sm" rows="2"></textarea></div>
                        <div class="form-group col-md-4"><label>Follow-up Notes</label><textarea id="fu-follow-up-notes" class="form-control form-control-sm" rows="2"></textarea></div>
                    </div>
                    <h6 class="mt-3">ANC / PNC / Child</h6><hr class="mt-1 mb-2">
                    <div class="form-row">
                        <div class="form-group col-md-2"><label>LMP</label><input type="date" id="fu-lmp" class="form-control form-control-sm"></div>
                        <div class="form-group col-md-2"><label>EDD</label><input type="date" id="fu-edd" class="form-control form-control-sm"></div>
                        <div class="form-group col-md-2"><label>Heartbeat</label><input type="text" id="fu-heartbeat" class="form-control form-control-sm"></div>
                        <div class="form-group col-md-2"><label>RBS</label><input type="text" id="fu-rbs" class="form-control form-control-sm"></div>
                        <div class="form-group col-md-1"><label>Hb</label><input type="text" id="fu-hb" class="form-control form-control-sm"></div>
                        <div class="form-group col-md-1"><label>Urine Sugar</label><input type="text" id="fu-urine-sugar" class="form-control form-control-sm"></div>
                        <div class="form-group col-md-2"><label>Urine Albumin</label><input type="text" id="fu-urine-albumin" class="form-control form-control-sm"></div>
                    </div>
                    <button type="submit" class="btn btn-success btn-lg float-right"><i class="fas fa-save mr-2"></i>Save Follow-up</button>
                </form>
            </div></div></div></div>

            <div class="row mt-4"><div class="col-12"><div class="card"><div class="card-body">
                <h5 class="card-title"><i class="fas fa-map-marked-alt mr-2 text-primary"></i>Village Summary Report</h5><hr>
                <div class="form-row bg-light p-3 mb-3 rounded align-items-end">
                    <div class="form-group col-md-3"><label>Start Date</label><input type="date" id="summary-start-date" class="form-control form-control-sm"></div>
                    <div class="form-group col-md-3"><label>End Date</label><input type="date" id="summary-end-date" class="form-control form-control-sm"></div>
                    <div class="form-group col-md-3"><button id="generate-summary-btn" class="btn btn-primary btn-block btn-sm">Generate</button></div>
                    <div class="form-group col-md-3"><button id="export-summary-btn" class="btn btn-success btn-block btn-sm" disabled><i class="fas fa-file-excel mr-1"></i>Export</button></div>
                </div>
                <div id="summary-table-container" class="table-responsive"><p class="text-muted text-center">Select a date range and click "Generate".</p></div>
            </div></div></div></div>
            
            <div class="row my-4"><div class="col-12"><div class="card"><div class="card-body">
                <div class="d-flex justify-content-between align-items-center">
                    <h5 class="card-title mb-0"><i class="fas fa-pills mr-2 text-primary"></i>Medicine Inventory</h5>
                    <button id="export-medicine-btn" class="btn btn-success btn-sm"><i class="fas fa-file-excel mr-1"></i>Export Inventory</button>
                </div>
                <hr>
                <form id="add-medicine-form" class="form-inline bg-light p-3 mb-3 rounded">
                    <div class="form-group mx-sm-3 mb-2"><input type="text" class="form-control form-control-sm" id="med-name" placeholder="Medicine Name" required></div>
                    <div class="form-group mx-sm-3 mb-2"><input type="number" class="form-control form-control-sm" id="med-stock" placeholder="Stock Count" required></div>
                    <div class="form-group mx-sm-3 mb-2"><label for="med-expiry" class="sr-only">Expiry</label><input type="date" class="form-control form-control-sm" id="med-expiry" required></div>
                    <button type="submit" class="btn btn-primary btn-sm mb-2"><i class="fas fa-plus mr-1"></i>Add Medicine</button>
                </form>
                <div id="medicine-table-container" class="table-responsive"><p class="text-muted text-center">Loading inventory...</p></div>
            </div></div></div></div>
        </div>

        <div id="page-records" class="d-none">
            <div class="row">
                <div class="col-12">
                    <div class="card">
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-center">
                                <h5 class="card-title mb-0"><i class="fas fa-book-medical mr-2 text-primary"></i>All Patient Records</h5>
                                <button id="export-records-btn" class="btn btn-success btn-sm"><i class="fas fa-file-excel mr-1"></i>Export All Records</button>
                            </div>
                            <hr>
                            <div id="records-table-container" class="table-responsive">
                                <p class="text-muted text-center">Loading records...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="page-demographics" class="d-none">
            <div class="row">
                <div class="col-12">
                    <div class="card">
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-center">
                                <h5 class="card-title mb-0"><i class="fas fa-users mr-2 text-primary"></i>Patient Demographics Report</h5>
                                <button id="export-demographics-btn" class="btn btn-success btn-sm"><i class="fas fa-file-excel mr-1"></i>Export Demographics</button>
                            </div>
                            <hr>
                            <div id="demographics-table-container" class="table-responsive">
                                <p class="text-muted text-center">Loading report...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="page-lab" class="d-none">
            <div class="row">
                <div class="col-12">
                    <div class="card">
                        <div class="card-body">
                             <div class="d-flex justify-content-between align-items-center">
                                <h5 class="card-title mb-0"><i class="fas fa-vial mr-2 text-primary"></i>Lab Records</h5>
                                <button id="export-lab-btn" class="btn btn-success btn-sm"><i class="fas fa-file-excel mr-1"></i>Export Lab Records</button>
                            </div>
                            <hr>
                            <div class="card bg-light mb-4">
                                <div class="card-body">
                                    <h6 class="card-title">Add New Lab Test</h6>
                                    <form id="add-lab-record-form">
                                        <div class="form-row align-items-end">
                                            <div class="form-group col-md-4">
                                                <label>Select Patient</label>
                                                <select id="lab-patient-id" class="form-control form-control-sm" required>
                                                    <option value="">-- Please Select --</option>
                                                </select>
                                            </div>
                                            <div class="form-group col-md-2"><label>Test Date</label><input type="date" id="lab-test-date" class="form-control form-control-sm" required></div>
                                            <div class="form-group col-md-3">
                                                <label>Test Name</label>
                                                <select id="lab-test-name" class="form-control form-control-sm" required>
                                                    <option>H.B./R.B.S.</option>
                                                    <option>H.B</option>
                                                    <option>R.B.S.</option>
                                                    <option>H.B./ALBU/R.B.S.</option>
                                                    <option>H.B./WIDAL</option>
                                                    <option>WIDAL</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-row mt-2">
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label>Positive Reading (Optional)</label>
                                                    <input type="text" id="lab-positive-reading" class="form-control form-control-sm">
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label>Negative Reading (Optional)</label>
                                                    <input type="text" id="lab-negative-reading" class="form-control form-control-sm">
                                                </div>
                                            </div>
                                        </div>
                                        <div id="lab-patient-details" class="mt-2 p-2 bg-white rounded border d-none">
                                            </div>
                                        <button type="submit" class="btn btn-primary mt-3 float-right"><i class="fas fa-save mr-2"></i>Save Test Result</button>
                                    </form>
                                </div>
                            </div>
                            <div id="lab-table-container" class="table-responsive mt-4">
                                <p class="text-muted text-center">Loading lab records...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="page-logbook" class="d-none">
            <div class="row">
                <div class="col-12">
                    <div class="card">
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-center">
                                <h5 class="card-title mb-0"><i class="fas fa-route mr-2 text-primary"></i>Ambulance Logbook</h5>
                                <button id="export-logbook-btn" class="btn btn-success btn-sm"><i class="fas fa-file-excel mr-1"></i>Export Logbook</button>
                            </div>
                            <hr>
                            <div class="card bg-light mb-4">
                                <div class="card-body">
                                    <h6 class="card-title">Add New Log Entry</h6>
                                    <form id="add-logbook-form">
                                        <div class="form-row align-items-end">
                                            <div class="form-group col-md-2"><label>Date</label><input type="date" id="log-date" class="form-control form-control-sm" required></div>
                                            <div class="form-group col-md-1"><label>Time In</label><input type="time" id="log-time-in" class="form-control form-control-sm"></div>
                                            <div class="form-group col-md-1"><label>Time Out</label><input type="time" id="log-time-out" class="form-control form-control-sm"></div>
                                            <div class="form-group col-md-2"><label>Opening KMs</label><input type="number" step="0.1" id="log-kms-opening" class="form-control form-control-sm"></div>
                                            <div class="form-group col-md-2"><label>Closing KMs</label><input type="number" step="0.1" id="log-kms-closing" class="form-control form-control-sm"></div>
                                            <div class="form-group col-md-1"><label>Total KMs</label><input type="text" id="log-total-kms" class="form-control form-control-sm" readonly></div>
                                            <div class="form-group col-md-1"><label>Fuel (L)</label><input type="number" step="0.01" id="log-fuel" class="form-control form-control-sm"></div>
                                        </div>
                                        <div class="form-row mt-2">
                                            <div class="form-group col-12"><label>Villages Visited (comma-separated)</label><input type="text" id="log-villages" class="form-control form-control-sm"></div>
                                        </div>
                                        <button type="submit" class="btn btn-primary mt-3 float-right"><i class="fas fa-save mr-2"></i>Save Log Entry</button>
                                    </form>
                                </div>
                            </div>
                            <div id="logbook-table-container" class="table-responsive mt-4">
                                <p class="text-muted text-center">Loading logbook...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="page-reports" class="d-none">
            <div class="row">
                <div class="col-12">
                    <div class="card">
                        <div class="card-header">
                            <ul class="nav nav-tabs card-header-tabs">
                                <li class="nav-item">
                                    <a class="nav-link active" id="nav-cumulative-report" href="#">Cumulative</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link disabled" href="#">Report 2 (Coming Soon)</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link disabled" href="#">Report 3 (Coming Soon)</a>
                                </li>
                                 <li class="nav-item">
                                    <a class="nav-link disabled" href="#">Report 4 (Coming Soon)</a>
                                </li>
                                 <li class="nav-item">
                                    <a class="nav-link disabled" href="#">Report 5 (Coming Soon)</a>
                                </li>
                            </ul>
                        </div>
                        <div class="card-body">
                            <div id="report-cumulative">
                                <div class="d-flex justify-content-between align-items-center">
                                    <h5 class="card-title mb-0"><i class="fas fa-calendar-alt mr-2 text-primary"></i>Cumulative Report</h5>
                                    <div>
                                        <select id="cumulative-year-select" class="form-control form-control-sm d-inline-block w-auto mr-2"></select>
                                        <button id="export-cumulative-btn" class="btn btn-success btn-sm"><i class="fas fa-file-excel mr-1"></i>Export</button>
                                    </div>
                                </div>
                                <hr>
                                <div id="cumulative-table-container" class="table-responsive">
                                    <p class="text-muted text-center">Select a year to generate the report.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </main>
    
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="script.js"></script>
</body>
</html>